% Copyright 2007-2009 by Massimo Redaelli
%
% This file may be distributed and/or modified
%
% 1. under the LaTeX Project Public License and/or
% 2. under the GNU Public License.
%
% See the file doc/LICENSE for more details.


%%%%%
%%%%%
%%%%%
%%%%% Se c'Ã¨ l'opzione symbol, fallback to siunitx con warning
%%%%%
%%%%%

\NeedsTeXFormat{LaTeX2e}

\def\pgfcircversion{0.4}

\ProvidesPackage{circuitikz}%
        [2015/05/15 The CircuiTikz circuit drawing package version \pgfcircversion]

%% Version 2.0 of pgf/TikZ is required
\RequirePackage{tikz}
\usetikzlibrary{calc}
\usepgflibrary{arrows}

\DeclareOption{european}{
	\ctikzset{voltage=european} \ctikzset{current=european} \ctikzset{inductor=european}
	 \ctikzset{resistor=european} \ctikzset{logic ports=european} \ctikzset{gas filled surge arrester = european} 
}

\DeclareOption{american}{
	\ctikzset{voltage=american} \ctikzset{current=american} \ctikzset{resistor=american} \ctikzset{inductor=american} \ctikzset{gas filled surge arrester = american}
	\ctikzset{logic ports = american}
}

\DeclareOption{fulldiodes}{
	\ctikzset{diode = full}
}

\DeclareOption{emptydiodes}{
	\ctikzset{diode = empty}
}

\DeclareOption{europeanvoltages}{
	\ctikzset{voltage=european}
}

\DeclareOption{americanvoltages}{
	\ctikzset{voltage=american}
}

\DeclareOption{europeancurrents}{
	\ctikzset{current = european}
}

\DeclareOption{americancurrents}{
	\ctikzset{current = american}
}

\DeclareOption{europeanvoltages}{
	\ctikzset{voltage = european}
}

\DeclareOption{americanresistors}{
	\ctikzset{resistor = american}
}

\DeclareOption{europeanresistors}{
	\ctikzset{resistor = european}
}

\DeclareOption{americaninductors}{
	\ctikzset{inductor = american}
}

\DeclareOption{europeaninductors}{
	\ctikzset{inductor = european}
}

\DeclareOption{cuteinductors}{
	\ctikzset{inductor = cute}
}

\DeclareOption{americanports}{
	\ctikzset{logic ports = american}
}

\DeclareOption{europeanports}{
	\ctikzset{logic ports = european}
}

\DeclareOption{americangfsurgearrester}{
	\ctikzset{gas filled surge arrester = american}
}

\DeclareOption{europeangfsurgearrester}{
	\ctikzset{gas filled surge arrester = european}
}


\DeclareOption{siunitx}{
	\pgf@circ@siunitxtrue
}

\DeclareOption{nosiunitx}{
	\pgf@circ@siunitxfalse
}

\DeclareOption{arrowmos}{
	\pgf@circuit@mos@arrowstrue
}

\DeclareOption{noarrowmos}{
	\pgf@circuit@mos@arrowsfalse
}

\DeclareOption{straightlabels}{
	\ctikzset{label/align = straight}
}

\DeclareOption{rotatelabels}{
	\ctikzset{label/align = rotate}
}

\DeclareOption{smartlabels}{
	\ctikzset{label/align = smart}
}



\DeclareOption{fulldiode}{
	\ctikzset{diode = full}
}

\DeclareOption{emptydiode}{
	\ctikzset{diode = empty}
}

\DeclareOption{europeanvoltage}{
	\ctikzset{voltage=european}
}

\DeclareOption{americanvoltage}{
	\ctikzset{voltage=american}
}

\DeclareOption{europeancurrent}{
	\ctikzset{current = european}
}

\DeclareOption{americancurrent}{
	\ctikzset{current = american}
}

\DeclareOption{europeanvoltage}{
	\ctikzset{voltage = european}
}

\DeclareOption{americanresistor}{
	\ctikzset{resistor = american}
}

\DeclareOption{europeanresistor}{
	\ctikzset{resistor = european}
}

\DeclareOption{americaninductor}{
	\ctikzset{inductor = american}
}

\DeclareOption{europeaninductor}{
	\ctikzset{inductor = european}
}

\DeclareOption{cuteinductor}{
	\ctikzset{inductor = cute}
}

\DeclareOption{americanport}{
	\ctikzset{logic ports = american}
}

\DeclareOption{europeanport}{
	\ctikzset{logic ports = european}
}

\DeclareOption{europeanport}{
	\ctikzset{logic ports = european}
}

\DeclareOption{compatibility}{
	\pgf@circuit@compattrue
}

\DeclareOption{betterproportions}{
	\ctikzset{monopoles/ground/width/.initial=.15}

	\ctikzset{bipoles/resistor/height/.initial=.23}
	\ctikzset{bipoles/resistor/width/.initial=.6}
	\ctikzset{bipoles/capacitor/height/.initial=.4}
	\ctikzset{bipoles/capacitor/width/.initial=.1}
	\ctikzset{bipoles/potentiometer/height/.initial=.6}
	\ctikzset{bipoles/potentiometer/height 2/.initial=.23}
	\ctikzset{bipoles/potentiometer/width/.initial=.6}
	\ctikzset{bipoles/photoresistor/height/.initial=.6}
	\ctikzset{bipoles/photoresistor/height 2/.initial=.23}
	\ctikzset{bipoles/photoresistor/width/.initial=.6}
	\ctikzset{bipoles/thermistor/main/.initial=.7}
	\ctikzset{bipoles/thermistor/height/.initial=.328}%.23/.7
	\ctikzset{bipoles/thermistor/width/.initial=.6}
	\ctikzset{bipoles/thermistorntc/width/.initial=.6}
	\ctikzset{bipoles/thermistorntc/main/.initial=.7}
	\ctikzset{bipoles/thermistorntc/height/.initial=.328}%.23/.7
	\ctikzset{bipoles/thermistorntc/height 2/.initial=.75}%.23/.7
	\ctikzset{bipoles/thermistorptc/width/.initial=.6}
	\ctikzset{bipoles/thermistorptc/main/.initial=.7}
	\ctikzset{bipoles/thermistorptc/height/.initial=.328}%.23/.7
	\ctikzset{bipoles/varistor/main/.initial=.7}
	\ctikzset{bipoles/varistor/height/.initial=.328}%.23/.7
	\ctikzset{bipoles/varistor/width/.initial=.6}
	\ctikzset{bipoles/vresistor/height/.initial=.45}
	\ctikzset{bipoles/vresistor/width/.initial=.6}
	\ctikzset{bipoles/generic/height/.initial=.23}
	\ctikzset{bipoles/generic/width/.initial=.6}
	\ctikzset{bipoles/generic potentiometer/height/.initial=.6}
	\ctikzset{bipoles/generic potentiometer/height 2/.initial=.23}
	\ctikzset{bipoles/generic potentiometer/width/.initial=.6}
	\ctikzset{bipoles/ageneric/height/.initial=.23}
	\ctikzset{bipoles/ageneric/width/.initial=.6}
	\ctikzset{bipoles/memristor/height/.initial=.23}
	\ctikzset{bipoles/memristor/wave height/.initial=.375}
	\ctikzset{bipoles/memristor/width/.initial=.60}
	\ctikzset{bipoles/tgeneric/height/.initial=.525}
	\ctikzset{bipoles/tgeneric/width/.initial=.6}
	\ctikzset{bipoles/tfullgeneric/height/.initial=.525}
	\ctikzset{bipoles/tfullgeneric/width/.initial=.60}
	\ctikzset{bipoles/fullgeneric/height/.initial=.23}
	\ctikzset{bipoles/fullgeneric/width/.initial=.6}
	\ctikzset{bipoles/diode/height/.initial=.3}
	\ctikzset{bipoles/diode/width/.initial=.25}
	
	\ctikzset{tripoles/thyristor/height/.initial=.66}
	\ctikzset{tripoles/thyristor/height 2/.initial=.3}
	\ctikzset{tripoles/thyristor/width/.initial=.6}
	\ctikzset{tripoles/thyristor/diode height/.initial=.3}
	\ctikzset{tripoles/thyristor/diode width left/.initial=.4}
	\ctikzset{tripoles/thyristor/diode width right/.initial=.3}

	\ctikzset{tripoles/triac/height/.initial=.66}
	\ctikzset{tripoles/triac/width/.initial=.6}
	\ctikzset{tripoles/triac/diode width left/.initial=.3}
	\ctikzset{tripoles/triac/diode width right/.initial=.3}
}

%%%%%%%%%



\input circuitikz.code.tex

% Latex specific
\ctikzset{tripoles/op amp/font/.initial=\scriptsize}

\ExecuteOptions{europeancurrents,europeanvoltages,americanports,americanresistors,cuteinductors,europeangfsurgearrester,nosiunitx,noarrowmos,smartlabels,nocompatibility}

\ProcessOptions\relax

\ifpgf@circ@siunitx
    \RequirePackage{xstring}[2009/03/13]
	%\expandafter\let\csname angstrom\endcsname\relax
	\RequirePackage{siunitx}
\fi

\input circuitikz1.code.tex

\newenvironment{circuitikz}{\begin{tikzpicture}}{\end{tikzpicture}}
%override (unused) circuitikz environment for compability to externalization)
\let\circuitikz\tikzpicture
\let\endcircuitikz\endtikzpicture


\endinput

